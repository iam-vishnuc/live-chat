{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import VideoChat from\"./components/VideoChat\";import TextChat from\"./components/TextChat\";import{io}from\"socket.io-client\";import\"./App.css\";// Create a single socket instance for the whole app\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(\"http://localhost:3000\");function App(){const[connected,setConnected]=useState(false);const[status,setStatus]=useState(\"Click 'Start Chat' to begin.\");// Listen for partner events\nuseEffect(()=>{socket.on(\"waiting\",()=>{setStatus(\"Waiting for a partner...\");});socket.on(\"paired\",()=>{setStatus(\"Connected to a stranger!\");});socket.on(\"partner-disconnected\",()=>{setStatus(\"Partner disconnected. Reconnecting...\");});// Cleanup on unmount\nreturn()=>{socket.off(\"waiting\");socket.off(\"paired\");socket.off(\"partner-disconnected\");};},[]);// Start chat\nconst startChat=()=>{setConnected(true);socket.emit(\"join\");// Optional: signal backend that user wants to join queue\n};// Skip partner\nconst handleSkip=()=>{setStatus(\"Skipping current partner...\");socket.emit(\"skip\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Live Chat (Omegle Clone)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"status\",children:status}),!connected&&/*#__PURE__*/_jsx(\"button\",{className:\"start-btn\",onClick:startChat,children:\"Start Chat\"}),connected&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VideoChat,{socket:socket}),/*#__PURE__*/_jsx(TextChat,{socket:socket}),/*#__PURE__*/_jsx(\"button\",{className:\"skip-btn\",onClick:handleSkip,children:\"Skip & Connect Next\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","VideoChat","TextChat","io","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","socket","App","connected","setConnected","status","setStatus","on","off","startChat","emit","handleSkip","className","children","onClick"],"sources":["C:/Users/vishn/OneDrive/Desktop/live chat/frontend/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport VideoChat from \"./components/VideoChat\";\nimport TextChat from \"./components/TextChat\";\nimport { io } from \"socket.io-client\";\nimport \"./App.css\";\n\n// Create a single socket instance for the whole app\nconst socket = io(\"http://localhost:3000\");\n\nfunction App() {\n  const [connected, setConnected] = useState(false);\n  const [status, setStatus] = useState(\"Click 'Start Chat' to begin.\");\n\n  // Listen for partner events\n  useEffect(() => {\n    socket.on(\"waiting\", () => {\n      setStatus(\"Waiting for a partner...\");\n    });\n\n    socket.on(\"paired\", () => {\n      setStatus(\"Connected to a stranger!\");\n    });\n\n    socket.on(\"partner-disconnected\", () => {\n      setStatus(\"Partner disconnected. Reconnecting...\");\n    });\n\n    // Cleanup on unmount\n    return () => {\n      socket.off(\"waiting\");\n      socket.off(\"paired\");\n      socket.off(\"partner-disconnected\");\n    };\n  }, []);\n\n  // Start chat\n  const startChat = () => {\n    setConnected(true);\n    socket.emit(\"join\"); // Optional: signal backend that user wants to join queue\n  };\n\n  // Skip partner\n  const handleSkip = () => {\n    setStatus(\"Skipping current partner...\");\n    socket.emit(\"skip\");\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Live Chat (Omegle Clone)</h1>\n      <p className=\"status\">{status}</p>\n\n      {!connected && (\n        <button className=\"start-btn\" onClick={startChat}>\n          Start Chat\n        </button>\n      )}\n\n      {connected && (\n        <>\n          <VideoChat socket={socket} />\n          <TextChat socket={socket} />\n          <button className=\"skip-btn\" onClick={handleSkip}>\n            Skip & Connect Next\n          </button>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,OAASC,EAAE,KAAQ,kBAAkB,CACrC,MAAO,WAAW,CAElB;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,MAAM,CAAGP,EAAE,CAAC,uBAAuB,CAAC,CAE1C,QAAS,CAAAQ,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACe,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,8BAA8B,CAAC,CAEpE;AACAC,SAAS,CAAC,IAAM,CACdU,MAAM,CAACM,EAAE,CAAC,SAAS,CAAE,IAAM,CACzBD,SAAS,CAAC,0BAA0B,CAAC,CACvC,CAAC,CAAC,CAEFL,MAAM,CAACM,EAAE,CAAC,QAAQ,CAAE,IAAM,CACxBD,SAAS,CAAC,0BAA0B,CAAC,CACvC,CAAC,CAAC,CAEFL,MAAM,CAACM,EAAE,CAAC,sBAAsB,CAAE,IAAM,CACtCD,SAAS,CAAC,uCAAuC,CAAC,CACpD,CAAC,CAAC,CAEF;AACA,MAAO,IAAM,CACXL,MAAM,CAACO,GAAG,CAAC,SAAS,CAAC,CACrBP,MAAM,CAACO,GAAG,CAAC,QAAQ,CAAC,CACpBP,MAAM,CAACO,GAAG,CAAC,sBAAsB,CAAC,CACpC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtBL,YAAY,CAAC,IAAI,CAAC,CAClBH,MAAM,CAACS,IAAI,CAAC,MAAM,CAAC,CAAE;AACvB,CAAC,CAED;AACA,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvBL,SAAS,CAAC,6BAA6B,CAAC,CACxCL,MAAM,CAACS,IAAI,CAAC,MAAM,CAAC,CACrB,CAAC,CAED,mBACEV,KAAA,QAAKY,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,OAAAiB,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjCjB,IAAA,MAAGgB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAER,MAAM,CAAI,CAAC,CAEjC,CAACF,SAAS,eACTP,IAAA,WAAQgB,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEL,SAAU,CAAAI,QAAA,CAAC,YAElD,CAAQ,CACT,CAEAV,SAAS,eACRH,KAAA,CAAAF,SAAA,EAAAe,QAAA,eACEjB,IAAA,CAACJ,SAAS,EAACS,MAAM,CAAEA,MAAO,CAAE,CAAC,cAC7BL,IAAA,CAACH,QAAQ,EAACQ,MAAM,CAAEA,MAAO,CAAE,CAAC,cAC5BL,IAAA,WAAQgB,SAAS,CAAC,UAAU,CAACE,OAAO,CAAEH,UAAW,CAAAE,QAAA,CAAC,qBAElD,CAAQ,CAAC,EACT,CACH,EACE,CAAC,CAEV,CAEA,cAAe,CAAAX,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}