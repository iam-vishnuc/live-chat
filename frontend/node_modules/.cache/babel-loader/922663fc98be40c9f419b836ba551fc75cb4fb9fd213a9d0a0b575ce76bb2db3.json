{"ast":null,"code":"import React,{useEffect,useRef,useState,forwardRef,useImperativeHandle}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoChat=/*#__PURE__*/forwardRef((_ref,ref)=>{var _remoteVideo$current;let{socket,onVideoToggle,onAudioToggle}=_ref;const localVideo=useRef(null);const remoteVideo=useRef(null);const peer=useRef(null);const localStream=useRef(null);const[isVideoEnabled,setIsVideoEnabled]=useState(true);const[isAudioEnabled,setIsAudioEnabled]=useState(true);const[error,setError]=useState(\"\");const[connectionStatus,setConnectionStatus]=useState(\"Connecting...\");// Cleanup function\nconst cleanup=()=>{// Stop all tracks\nif(localStream.current){localStream.current.getTracks().forEach(track=>{track.stop();});localStream.current=null;}// Close peer connection\nif(peer.current){peer.current.close();peer.current=null;}// Clear video sources\nif(localVideo.current){localVideo.current.srcObject=null;}if(remoteVideo.current){remoteVideo.current.srcObject=null;}};// Initialize WebRTC\nuseEffect(()=>{if(!socket)return;let isMounted=true;async function init(){try{// 1. Get camera + microphone\ntry{localStream.current=await navigator.mediaDevices.getUserMedia({video:true,audio:true});if(!isMounted){cleanup();return;}if(localVideo.current){localVideo.current.srcObject=localStream.current;}}catch(err){console.error(\"Error accessing media devices:\",err);setError(\"Could not access camera/microphone. Please check permissions.\");setConnectionStatus(\"Media access denied\");return;}// 2. Create peer connection\npeer.current=new RTCPeerConnection({iceServers:[{urls:\"stun:stun.l.google.com:19302\"},{urls:\"stun:stun1.l.google.com:19302\"}]});// 3. Add local tracks\nlocalStream.current.getTracks().forEach(track=>{if(peer.current&&localStream.current){peer.current.addTrack(track,localStream.current);}});// 4. Handle connection state changes\npeer.current.onconnectionstatechange=()=>{if(peer.current){setConnectionStatus(peer.current.connectionState);if(peer.current.connectionState===\"failed\"){setError(\"Connection failed. Please try again.\");}}};// 5. When remote video arrives\npeer.current.ontrack=event=>{if(remoteVideo.current&&event.streams[0]){remoteVideo.current.srcObject=event.streams[0];setConnectionStatus(\"Connected\");}};// 6. Send ICE candidates\npeer.current.onicecandidate=event=>{if(event.candidate&&socket){socket.emit(\"ice-candidate\",event.candidate);}};// 7. Handle ICE connection state\npeer.current.oniceconnectionstatechange=()=>{if(peer.current){if(peer.current.iceConnectionState===\"disconnected\"||peer.current.iceConnectionState===\"failed\"){setConnectionStatus(\"Disconnected\");}}};// Socket event handlers\nconst handlePaired=async()=>{if(!peer.current)return;try{const offer=await peer.current.createOffer();await peer.current.setLocalDescription(offer);if(socket){socket.emit(\"offer\",offer);}setConnectionStatus(\"Connecting...\");}catch(err){console.error(\"Error creating offer:\",err);setError(\"Failed to create connection offer\");}};const handleOffer=async offer=>{if(!peer.current)return;try{await peer.current.setRemoteDescription(offer);const answer=await peer.current.createAnswer();await peer.current.setLocalDescription(answer);if(socket){socket.emit(\"answer\",answer);}setConnectionStatus(\"Connecting...\");}catch(err){console.error(\"Error handling offer:\",err);setError(\"Failed to handle connection offer\");}};const handleAnswer=async answer=>{if(!peer.current)return;try{await peer.current.setRemoteDescription(answer);}catch(err){console.error(\"Error handling answer:\",err);setError(\"Failed to handle connection answer\");}};const handleIceCandidate=async candidate=>{if(!peer.current)return;try{await peer.current.addIceCandidate(candidate);}catch(err){console.error(\"ICE Error:\",err);// Don't show error for ICE candidates as they're common\n}};const handlePartnerDisconnected=()=>{setConnectionStatus(\"Partner disconnected\");cleanup();// Reinitialize for new connection\nsetTimeout(()=>{if(isMounted){init();}},1000);};// Register socket event listeners\nsocket.on(\"paired\",handlePaired);socket.on(\"offer\",handleOffer);socket.on(\"answer\",handleAnswer);socket.on(\"ice-candidate\",handleIceCandidate);socket.on(\"partner-disconnected\",handlePartnerDisconnected);// Cleanup function\nreturn()=>{socket.off(\"paired\",handlePaired);socket.off(\"offer\",handleOffer);socket.off(\"answer\",handleAnswer);socket.off(\"ice-candidate\",handleIceCandidate);socket.off(\"partner-disconnected\",handlePartnerDisconnected);};}catch(err){console.error(\"Initialization error:\",err);setError(\"Failed to initialize video chat\");setConnectionStatus(\"Error\");}}init();// Cleanup on unmount\nreturn()=>{isMounted=false;cleanup();};},[socket]);// Toggle video\nconst toggleVideo=()=>{if(localStream.current){const videoTrack=localStream.current.getVideoTracks()[0];if(videoTrack){videoTrack.enabled=!videoTrack.enabled;setIsVideoEnabled(videoTrack.enabled);if(onVideoToggle){onVideoToggle(videoTrack.enabled);}}}};// Toggle audio\nconst toggleAudio=()=>{if(localStream.current){const audioTrack=localStream.current.getAudioTracks()[0];if(audioTrack){audioTrack.enabled=!audioTrack.enabled;setIsAudioEnabled(audioTrack.enabled);if(onAudioToggle){onAudioToggle(audioTrack.enabled);}}}};// Expose methods via ref\nuseImperativeHandle(ref,()=>({toggleVideo,toggleAudio}));return/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",style:{position:\"relative\",height:\"100%\",borderRadius:\"8px\",overflow:\"hidden\",backgroundColor:\"#000\",display:\"flex\",flexDirection:\"column\"},children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"10px\",left:\"50%\",transform:\"translateX(-50%)\",backgroundColor:\"rgba(255, 0, 0, 0.8)\",color:\"white\",padding:\"8px 16px\",borderRadius:\"4px\",zIndex:10,fontSize:\"14px\"},children:error}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"10px\",right:\"10px\",backgroundColor:\"rgba(0, 0, 0, 0.7)\",color:\"white\",padding:\"4px 8px\",borderRadius:\"4px\",fontSize:\"12px\",zIndex:10},children:connectionStatus}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-grid-container\",style:{display:\"flex\",flexDirection:\"column\",gap:\"10px\",alignItems:\"center\",justifyContent:\"center\",flex:1,minHeight:0,padding:\"10px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-square\",style:{position:\"relative\",backgroundColor:\"#1a1a1a\",width:\"400px\",height:\"400px\",maxWidth:\"100%\",aspectRatio:\"1 / 1\"},children:[/*#__PURE__*/_jsx(\"video\",{ref:remoteVideo,autoPlay:true,playsInline:true,style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:\"10px\",left:\"10px\",color:\"white\",backgroundColor:\"rgba(0, 0, 0, 0.7)\",padding:\"4px 8px\",borderRadius:\"4px\",fontSize:\"12px\"},children:\"Stranger\"}),!((_remoteVideo$current=remoteVideo.current)!==null&&_remoteVideo$current!==void 0&&_remoteVideo$current.srcObject)&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",color:\"#999\",textAlign:\"center\",fontSize:\"16px\"},children:\"Waiting for partner...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-square\",style:{position:\"relative\",backgroundColor:\"#1a1a1a\",width:\"400px\",height:\"400px\",maxWidth:\"100%\",aspectRatio:\"1 / 1\"},children:[/*#__PURE__*/_jsx(\"video\",{ref:localVideo,autoPlay:true,muted:true,playsInline:true,style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:\"10px\",left:\"10px\",color:\"white\",backgroundColor:\"rgba(0, 0, 0, 0.7)\",padding:\"4px 8px\",borderRadius:\"4px\",fontSize:\"12px\"},children:\"You\"})]})]})]});});VideoChat.displayName='VideoChat';export default VideoChat;","map":{"version":3,"names":["React","useEffect","useRef","useState","forwardRef","useImperativeHandle","jsx","_jsx","jsxs","_jsxs","VideoChat","_ref","ref","_remoteVideo$current","socket","onVideoToggle","onAudioToggle","localVideo","remoteVideo","peer","localStream","isVideoEnabled","setIsVideoEnabled","isAudioEnabled","setIsAudioEnabled","error","setError","connectionStatus","setConnectionStatus","cleanup","current","getTracks","forEach","track","stop","close","srcObject","isMounted","init","navigator","mediaDevices","getUserMedia","video","audio","err","console","RTCPeerConnection","iceServers","urls","addTrack","onconnectionstatechange","connectionState","ontrack","event","streams","onicecandidate","candidate","emit","oniceconnectionstatechange","iceConnectionState","handlePaired","offer","createOffer","setLocalDescription","handleOffer","setRemoteDescription","answer","createAnswer","handleAnswer","handleIceCandidate","addIceCandidate","handlePartnerDisconnected","setTimeout","on","off","toggleVideo","videoTrack","getVideoTracks","enabled","toggleAudio","audioTrack","getAudioTracks","className","style","position","height","borderRadius","overflow","backgroundColor","display","flexDirection","children","top","left","transform","color","padding","zIndex","fontSize","right","gap","alignItems","justifyContent","flex","minHeight","width","maxWidth","aspectRatio","autoPlay","playsInline","objectFit","bottom","textAlign","muted","displayName"],"sources":["C:/Users/vishn/OneDrive/Desktop/live chat/frontend/src/components/VideoChat.js"],"sourcesContent":["import React, { useEffect, useRef, useState, forwardRef, useImperativeHandle } from \"react\";\r\n\r\nconst VideoChat = forwardRef(({ socket, onVideoToggle, onAudioToggle }, ref) => {\r\n  const localVideo = useRef(null);\r\n  const remoteVideo = useRef(null);\r\n  const peer = useRef(null);\r\n  const localStream = useRef(null);\r\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\r\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [connectionStatus, setConnectionStatus] = useState(\"Connecting...\");\r\n\r\n  // Cleanup function\r\n  const cleanup = () => {\r\n    // Stop all tracks\r\n    if (localStream.current) {\r\n      localStream.current.getTracks().forEach(track => {\r\n        track.stop();\r\n      });\r\n      localStream.current = null;\r\n    }\r\n\r\n    // Close peer connection\r\n    if (peer.current) {\r\n      peer.current.close();\r\n      peer.current = null;\r\n    }\r\n\r\n    // Clear video sources\r\n    if (localVideo.current) {\r\n      localVideo.current.srcObject = null;\r\n    }\r\n    if (remoteVideo.current) {\r\n      remoteVideo.current.srcObject = null;\r\n    }\r\n  };\r\n\r\n  // Initialize WebRTC\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    let isMounted = true;\r\n\r\n    async function init() {\r\n      try {\r\n        // 1. Get camera + microphone\r\n        try {\r\n          localStream.current = await navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: true\r\n          });\r\n\r\n          if (!isMounted) {\r\n            cleanup();\r\n            return;\r\n          }\r\n\r\n          if (localVideo.current) {\r\n            localVideo.current.srcObject = localStream.current;\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Error accessing media devices:\", err);\r\n          setError(\"Could not access camera/microphone. Please check permissions.\");\r\n          setConnectionStatus(\"Media access denied\");\r\n          return;\r\n        }\r\n\r\n        // 2. Create peer connection\r\n        peer.current = new RTCPeerConnection({\r\n          iceServers: [\r\n            { urls: \"stun:stun.l.google.com:19302\" },\r\n            { urls: \"stun:stun1.l.google.com:19302\" }\r\n          ]\r\n        });\r\n\r\n        // 3. Add local tracks\r\n        localStream.current.getTracks().forEach(track => {\r\n          if (peer.current && localStream.current) {\r\n            peer.current.addTrack(track, localStream.current);\r\n          }\r\n        });\r\n\r\n        // 4. Handle connection state changes\r\n        peer.current.onconnectionstatechange = () => {\r\n          if (peer.current) {\r\n            setConnectionStatus(peer.current.connectionState);\r\n            if (peer.current.connectionState === \"failed\") {\r\n              setError(\"Connection failed. Please try again.\");\r\n            }\r\n          }\r\n        };\r\n\r\n        // 5. When remote video arrives\r\n        peer.current.ontrack = (event) => {\r\n          if (remoteVideo.current && event.streams[0]) {\r\n            remoteVideo.current.srcObject = event.streams[0];\r\n            setConnectionStatus(\"Connected\");\r\n          }\r\n        };\r\n\r\n        // 6. Send ICE candidates\r\n        peer.current.onicecandidate = (event) => {\r\n          if (event.candidate && socket) {\r\n            socket.emit(\"ice-candidate\", event.candidate);\r\n          }\r\n        };\r\n\r\n        // 7. Handle ICE connection state\r\n        peer.current.oniceconnectionstatechange = () => {\r\n          if (peer.current) {\r\n            if (peer.current.iceConnectionState === \"disconnected\" || \r\n                peer.current.iceConnectionState === \"failed\") {\r\n              setConnectionStatus(\"Disconnected\");\r\n            }\r\n          }\r\n        };\r\n\r\n        // Socket event handlers\r\n        const handlePaired = async () => {\r\n          if (!peer.current) return;\r\n          try {\r\n            const offer = await peer.current.createOffer();\r\n            await peer.current.setLocalDescription(offer);\r\n            if (socket) {\r\n              socket.emit(\"offer\", offer);\r\n            }\r\n            setConnectionStatus(\"Connecting...\");\r\n          } catch (err) {\r\n            console.error(\"Error creating offer:\", err);\r\n            setError(\"Failed to create connection offer\");\r\n          }\r\n        };\r\n\r\n        const handleOffer = async (offer) => {\r\n          if (!peer.current) return;\r\n          try {\r\n            await peer.current.setRemoteDescription(offer);\r\n            const answer = await peer.current.createAnswer();\r\n            await peer.current.setLocalDescription(answer);\r\n            if (socket) {\r\n              socket.emit(\"answer\", answer);\r\n            }\r\n            setConnectionStatus(\"Connecting...\");\r\n          } catch (err) {\r\n            console.error(\"Error handling offer:\", err);\r\n            setError(\"Failed to handle connection offer\");\r\n          }\r\n        };\r\n\r\n        const handleAnswer = async (answer) => {\r\n          if (!peer.current) return;\r\n          try {\r\n            await peer.current.setRemoteDescription(answer);\r\n          } catch (err) {\r\n            console.error(\"Error handling answer:\", err);\r\n            setError(\"Failed to handle connection answer\");\r\n          }\r\n        };\r\n\r\n        const handleIceCandidate = async (candidate) => {\r\n          if (!peer.current) return;\r\n          try {\r\n            await peer.current.addIceCandidate(candidate);\r\n          } catch (err) {\r\n            console.error(\"ICE Error:\", err);\r\n            // Don't show error for ICE candidates as they're common\r\n          }\r\n        };\r\n\r\n        const handlePartnerDisconnected = () => {\r\n          setConnectionStatus(\"Partner disconnected\");\r\n          cleanup();\r\n          // Reinitialize for new connection\r\n          setTimeout(() => {\r\n            if (isMounted) {\r\n              init();\r\n            }\r\n          }, 1000);\r\n        };\r\n\r\n        // Register socket event listeners\r\n        socket.on(\"paired\", handlePaired);\r\n        socket.on(\"offer\", handleOffer);\r\n        socket.on(\"answer\", handleAnswer);\r\n        socket.on(\"ice-candidate\", handleIceCandidate);\r\n        socket.on(\"partner-disconnected\", handlePartnerDisconnected);\r\n\r\n        // Cleanup function\r\n        return () => {\r\n          socket.off(\"paired\", handlePaired);\r\n          socket.off(\"offer\", handleOffer);\r\n          socket.off(\"answer\", handleAnswer);\r\n          socket.off(\"ice-candidate\", handleIceCandidate);\r\n          socket.off(\"partner-disconnected\", handlePartnerDisconnected);\r\n        };\r\n      } catch (err) {\r\n        console.error(\"Initialization error:\", err);\r\n        setError(\"Failed to initialize video chat\");\r\n        setConnectionStatus(\"Error\");\r\n      }\r\n    }\r\n\r\n    init();\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      isMounted = false;\r\n      cleanup();\r\n    };\r\n  }, [socket]);\r\n\r\n  // Toggle video\r\n  const toggleVideo = () => {\r\n    if (localStream.current) {\r\n      const videoTrack = localStream.current.getVideoTracks()[0];\r\n      if (videoTrack) {\r\n        videoTrack.enabled = !videoTrack.enabled;\r\n        setIsVideoEnabled(videoTrack.enabled);\r\n        if (onVideoToggle) {\r\n          onVideoToggle(videoTrack.enabled);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Toggle audio\r\n  const toggleAudio = () => {\r\n    if (localStream.current) {\r\n      const audioTrack = localStream.current.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !audioTrack.enabled;\r\n        setIsAudioEnabled(audioTrack.enabled);\r\n        if (onAudioToggle) {\r\n          onAudioToggle(audioTrack.enabled);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Expose methods via ref\r\n  useImperativeHandle(ref, () => ({\r\n    toggleVideo,\r\n    toggleAudio\r\n  }));\r\n\r\n  return (\r\n    <div className=\"video-container\" style={{ \r\n      position: \"relative\",\r\n      height: \"100%\",\r\n      borderRadius: \"8px\",\r\n      overflow: \"hidden\",\r\n      backgroundColor: \"#000\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\"\r\n    }}>\r\n      {error && (\r\n        <div style={{\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          left: \"50%\",\r\n          transform: \"translateX(-50%)\",\r\n          backgroundColor: \"rgba(255, 0, 0, 0.8)\",\r\n          color: \"white\",\r\n          padding: \"8px 16px\",\r\n          borderRadius: \"4px\",\r\n          zIndex: 10,\r\n          fontSize: \"14px\"\r\n        }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div style={{\r\n        position: \"absolute\",\r\n        top: \"10px\",\r\n        right: \"10px\",\r\n        backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n        color: \"white\",\r\n        padding: \"4px 8px\",\r\n        borderRadius: \"4px\",\r\n        fontSize: \"12px\",\r\n        zIndex: 10\r\n      }}>\r\n        {connectionStatus}\r\n      </div>\r\n\r\n      <div className=\"video-grid-container\" style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: \"10px\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        flex: 1,\r\n        minHeight: 0,\r\n        padding: \"10px\"\r\n      }}>\r\n        {/* Top section - Partner/Stranger video */}\r\n        <div className=\"video-square\" style={{ \r\n          position: \"relative\", \r\n          backgroundColor: \"#1a1a1a\",\r\n          width: \"400px\",\r\n          height: \"400px\",\r\n          maxWidth: \"100%\",\r\n          aspectRatio: \"1 / 1\"\r\n        }}>\r\n          <video\r\n            ref={remoteVideo}\r\n            autoPlay\r\n            playsInline\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              objectFit: \"cover\"\r\n            }}\r\n          />\r\n          <div style={{\r\n            position: \"absolute\",\r\n            bottom: \"10px\",\r\n            left: \"10px\",\r\n            color: \"white\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n            padding: \"4px 8px\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\"\r\n          }}>\r\n            Stranger\r\n          </div>\r\n          {!remoteVideo.current?.srcObject && (\r\n            <div style={{\r\n              position: \"absolute\",\r\n              top: \"50%\",\r\n              left: \"50%\",\r\n              transform: \"translate(-50%, -50%)\",\r\n              color: \"#999\",\r\n              textAlign: \"center\",\r\n              fontSize: \"16px\"\r\n            }}>\r\n              Waiting for partner...\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Bottom section - Your video */}\r\n        <div className=\"video-square\" style={{ \r\n          position: \"relative\", \r\n          backgroundColor: \"#1a1a1a\",\r\n          width: \"400px\",\r\n          height: \"400px\",\r\n          maxWidth: \"100%\",\r\n          aspectRatio: \"1 / 1\"\r\n        }}>\r\n          <video\r\n            ref={localVideo}\r\n            autoPlay\r\n            muted\r\n            playsInline\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              objectFit: \"cover\"\r\n            }}\r\n          />\r\n          <div style={{\r\n            position: \"absolute\",\r\n            bottom: \"10px\",\r\n            left: \"10px\",\r\n            color: \"white\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n            padding: \"4px 8px\",\r\n            borderRadius: \"4px\",\r\n            fontSize: \"12px\"\r\n          }}>\r\n            You\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n});\r\n\r\nVideoChat.displayName = 'VideoChat';\r\n\r\nexport default VideoChat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}